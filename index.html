<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookmark Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <script src="js/content-sanitizer.js"></script>
    <script src="js/utils/logger.js"></script>
    <script src="js/utils/dom-utils.js"></script>
    <script src="js/components/NotesManager.js"></script>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' https://www.google.com https://*.google.com data: *; connect-src 'self' https: http:;">
</head>

<body>
    <div class="header">
        <div class="search-container">
            <input type="text" class="search-box" placeholder="Search bookmarks (e.g., 'github javascript' finds all bookmarks with both words)..." id="searchInput">
            <button class="search-clear" id="searchClear" title="Clear search">‚úï</button>
        </div>
        <button class="btn" onclick="showAddFolderModal()">+ Folder</button>
        <button class="btn" onclick="showAddLinkModal()">+ Link</button>
        <button class="btn" onclick="exportData()">Export</button>
        <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
        <button class="btn" onclick="document.getElementById('importFile').click()">Import</button>
        <button class="btn btn-notes" onclick="toggleNotesWindow()">üìù My Notes</button>
    </div>
    <div class="main">
        <div class="sidebar">
            <div id="folderList"></div>
        </div>
        <div class="resizer" id="sidebarResizer"></div>
        <div class="content">
            <div id="linkList"></div>
        </div>
    </div>

    <!-- Modals -->
    <div id="folderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add/Edit Folder</div>
            <div class="form-group">
                <label class="form-label">Folder Name</label>
                <input type="text" class="form-input" id="folderName">
            </div>
            <div class="form-group">
                <label class="form-label">Parent Folder (optional)</label>
                <select class="form-select" id="parentFolder">
                    <option value="">None (Root level)</option>
                </select>
            </div>
            <div class="form-actions">
                <button class="btn" onclick="closeModal('folderModal')">Cancel</button>
                <button class="btn btn-save" onclick="saveFolder()">Save</button>
            </div>
        </div>
    </div>

    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Add/Edit Link</div>
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" class="form-input" id="linkTitle">
            </div>
            <div class="form-group">
                <label class="form-label">URL</label>
                <input type="text" class="form-input" id="linkUrl">
            </div>
            <div class="form-group">
                <label class="form-label">Folder</label>
                <select class="form-select" id="linkFolder">
                    <option value="">Select folder...</option>
                </select>
            </div>
            <div class="form-actions">
                <button class="btn" onclick="closeModal('linkModal')">Cancel</button>
                <button class="btn btn-save" onclick="saveLink()">Save</button>
            </div>
        </div>
    </div>

    <!-- Notes Window -->
    <div id="notesWindow" class="notes-window">
        <div class="notes-header" id="notesHeader">
            <div class="notes-title">üìù My Notes</div>
            <button class="notes-close" onclick="closeNotesWindow()" title="Close (Esc)">√ó</button>
        </div>
        <div class="notes-toolbar">
            <button class="toolbar-btn" data-command="bold" title="Bold (Ctrl+B)">
                <strong>B</strong>
            </button>
            <button class="toolbar-btn" data-command="italic" title="Italic (Ctrl+I)">
                <em>I</em>
            </button>
            <div class="toolbar-separator"></div>
            <button class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                ‚Ä¢
            </button>
            <button class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                1.
            </button>
            <div class="toolbar-separator"></div>
            <button class="toolbar-btn" data-command="removeFormat" title="Clear Formatting">
                ‚å´
            </button>
        </div>
        <div class="notes-content">
            <div id="notesEditor" class="notes-editor" contenteditable="true" data-placeholder="Type your notes here...

‚úì Press Enter for new lines
‚úì Window is resizable and movable
‚úì Your notes are automatically saved"></div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>

</html>